<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📊 Attendance Records - Attendance Management System</title>
    <link rel="stylesheet" href="modern-styles.css">
    <style>
        body {font-family: Arial, sans-serif; background: linear-gradient(135deg,#6e8efb,#a777e3); margin:0; padding:20px;}
        .container {max-width:1200px; margin:auto;}
        .glass-card {background:rgba(255,255,255,0.95); padding:20px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.2);}
        .navbar {display:flex; justify-content:space-around; background:#2d4a8a; padding:10px; border-radius:10px; margin-bottom:20px;}
        .navbar a {color:white; text-decoration:none; padding:8px 16px; border-radius:20px;}
        .navbar a.active {background:#4CAF50;}
        .header {text-align:center; margin-bottom:20px;}
        .gradient-text {background: linear-gradient(45deg,#2d4a8a,#a777e3); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
        .summary-cards {display:grid; grid-template-columns:repeat(4,1fr); gap:15px; margin-bottom:20px;}
        .summary-card {background:white; border-radius:10px; padding:20px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
        .summary-number {font-size:28px; font-weight:bold; color:#2d4a8a;}
        .whatsapp-section {background:#e8f5e9; padding:15px; border-radius:10px; margin-bottom:20px;}
        .filter-section {background:#f1f1f1; padding:15px; border-radius:10px; margin-bottom:20px;}
        .filter-row {display:flex; gap:15px; flex-wrap:wrap;}
        .filter-group {display:flex; flex-direction:column;}
        .btn-filter, .btn-reset, .btn-absent {padding:8px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:bold;}
        .btn-filter {background:#4CAF50; color:white;}
        .btn-reset {background:#9e9e9e; color:white;}
        .btn-absent {background:#f44336; color:white;}
        .records-container, .absent-section {margin-bottom:20px;}
        table {width:100%; border-collapse:collapse; margin-top:10px;}
        th, td {border:1px solid #ddd; padding:10px; text-align:center;}
        th {background:#2d4a8a; color:white;}
        .absent-summary {display:flex; justify-content:space-between; align-items:center;}
        .absent-table th {background:#f44336;}
        .no-records, .no-absent {text-align:center; padding:15px; font-style:italic; color:#555;}
    </style>
</head>
<body>
    <div class="container">
        <div class="glass-card">
            <div class="navbar">
                <a href="index.html">🏠 Home</a>
                <a href="add-employee.html">👤 Add Employee</a>
                <a href="view-employees.html">👥 View Employees</a>
                <a href="attendance-records.html" class="active">📊 Records</a>
                <a href="fingerprint-verify.html">✋ Verify</a>
            </div>

            <div class="header">
                <h1 class="gradient-text">📊 Attendance Records</h1>
                <p>View and analyze employee attendance history</p>
            </div>

            <div class="summary-cards">
                <div class="summary-card"><div class="summary-number" id="totalRecords">1</div><div class="summary-label">Total Records</div></div>
                <div class="summary-card"><div class="summary-number" id="presentToday">1</div><div class="summary-label">Present Today</div></div>
                <div class="summary-card"><div class="summary-number" id="totalEmployees">4</div><div class="summary-label">Total Employees</div></div>
                <div class="summary-card"><div class="summary-number" id="avgAttendance">25%</div><div class="summary-label">Attendance Rate</div></div>
            </div>

            <div class="filter-section">
                <h3>🔍 Filter Records</h3>
                <div class="filter-row">
                    <div class="filter-group"><label for="employeeFilter">Employee</label><select id="employeeFilter"><option value="">All Employees</option><option value="FP001">Anjan</option><option value="FP002">Chanchal</option><option value="FP003">Soham</option><option value="FP004">Ayaz</option></select></div>
                    <div class="filter-group"><label for="dateFrom">From Date</label><input type="date" id="dateFrom" value="2025-09-09"></div>
                    <div class="filter-group"><label for="dateTo">To Date</label><input type="date" id="dateTo" value="2025-09-09"></div>
                    <div class="filter-group"><label for="statusFilter">Status</label><select id="statusFilter"><option value="">All Status</option><option value="PRESENT">Present</option><option value="ABSENT" selected>Absent</option></select></div>
                </div>
                <div>
                    <button class="btn-filter" onclick="applyFilters()">🔍 Apply Filters</button>
                    <button class="btn-reset" onclick="resetFilters()">🔄 Reset</button>
                    <button class="btn-filter" onclick="refreshData()" style="margin-left: 20px;">🔄 Refresh Data</button>
                    <button class="btn-filter" onclick="exportRecords()" style="margin-left: 10px;">📥 Export CSV</button>
                </div>
            </div>

            <div class="absent-section" id="absentSection">
                <h3>🚫 Absent Employees Today</h3>
                <div class="absent-summary">
                    <div class="absent-count"><span id="absentCount">3</span> employees absent on <span id="absentDate">2025-09-09</span></div>
                    <button class="btn-absent" onclick="exportAbsentEmployees()">📥 Export Absent CSV</button>
                </div>
                <div class="absent-table-container" id="absentTableContainer">
                    <table class="absent-table" id="absentTable">
                        <thead><tr><th>Employee ID</th><th>Name</th><th>Department</th><th>Status</th></tr></thead>
                        <tbody id="absentTableBody">
                            <tr><td>FP002</td><td>Chanchal</td><td>DS</td><td>ABSENT</td></tr>
                            <tr><td>FP004</td><td>Ayaz</td><td>DS</td><td>ABSENT</td></tr>
                            <tr><td>FP003</td><td>Soham</td><td>HR</td><td>ABSENT</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="records-container">
                <h3>📋 Attendance Records</h3>
                <table class="records-table" id="recordsTable">
                    <thead><tr><th>📅 Date</th><th>🕐 Time</th><th>👤 Employee</th><th>🔑 Fingerprint ID</th><th>🏢 Department</th><th>📊 Status</th></tr></thead>
                    <tbody id="recordsTableBody">
                        <tr><td>2025-09-09</td><td>11:25:58</td><td>Anjan</td><td>FP001</td><td>SA</td><td>PRESENT</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        function exportRecords(){
            let table=document.getElementById("recordsTable");
            let csv="";
            for(let row of table.rows){
                let cells=[...row.cells].map(td=>td.innerText);
                csv+=cells.join(",")+"\n";
            }
            downloadCSV(csv,"attendance_records.csv");
        }
        function exportAbsentEmployees(){
            let table=document.getElementById("absentTable");
            let csv="";
            for(let row of table.rows){
                let cells=[...row.cells].map(td=>td.innerText);
                csv+=cells.join(",")+"\n";
            }
            downloadCSV(csv,"absent_employees.csv");
        }
        function downloadCSV(csv,filename){
            let blob=new Blob([csv],{type:"text/csv"});
            let link=document.createElement("a");
            link.href=URL.createObjectURL(blob);
            link.download=filename;
            link.click();
        }
    </script>
</body>
</html>
